<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üóì Custom Study Planner</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background-color: #ffe4f0;
      margin: 0;
      padding: 0;
    }

    header {
      text-align: center;
      padding: 20px;
      background: #ffb6c1;
      color: white;
      font-size: 1.5rem;
      border-bottom: 5px dashed white;
    }

    nav {
      text-align: center;
      margin: 15px;
    }

    nav a {
      background-color: #ff69b4;
      color: white;
      text-decoration: none;
      padding: 10px 15px;
      border-radius: 10px;
      margin: 5px;
      display: inline-block;
    }

    .planner-container {
      max-width: 1000px;
      margin: auto;
      background: #fff0f5;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      overflow-x: auto;
    }

    #timeInput {
      padding: 10px;
      width: 250px;
      border: 2px solid #ffb6c1;
      border-radius: 10px;
      margin-right: 10px;
    }

    #addRowBtn {
      background-color: #ff69b4;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
    }

    #addRowBtn:hover {
      background-color: #ff1493;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background-color: #fff;
    }

    th, td {
      border: 2px solid #ffb6c1;
      padding: 10px;
      text-align: center;
    }

    th {
      background-color: #ffe4e1;
      color: #d63384;
    }

    td[contenteditable="true"] {
      background-color: #fff8fb;
    }

    .delete-btn {
      background: #ff6b81;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }

    .delete-btn:hover {
      background: #ff1744;
    }

    @media (max-width: 600px) {
      #timeInput {
        width: 100%;
        margin-bottom: 10px;
      }

      #addRowBtn {
        width: 100%;
        margin-bottom: 10px;
      }

      table, thead, tbody, th, td, tr {
        font-size: 12px;
      }

      th, td {
        padding: 5px;
      }
    }
  </style>
</head>
<body>

  <header>
    <h1>üìö My Weekly Planner</h1>
    <p>Create your own time slots and study schedule!</p>
  </header>

  <nav>
    <a href="index.html">üè† Home</a>
    <a href="tasks.html">‚úÖ Tasks</a>
  </nav>

  <main class="planner-container">
    <input type="text" id="timeInput" placeholder="e.g. 6:00‚Äì7:00 AM">
    <button id="addRowBtn">‚ûï Add Time Slot</button>

    <table id="plannerTable">
      <thead>
        <tr>
          <th>Time</th>
          <th>Monday</th>
          <th>Tuesday</th>
          <th>Wednesday</th>
          <th>Thursday</th>
          <th>Friday</th>
          <th>Saturday</th>
          <th>Sunday</th>
          <th>üóë</th>
        </tr>
      </thead>
      <tbody id="plannerBody">
        <!-- Rows will be added here -->
      </tbody>
    </table>
  </main>

  <script>
    const addRowBtn = document.getElementById("addRowBtn");
    const plannerBody = document.getElementById("plannerBody");

    function savePlannerToStorage() {
      const rows = [];
      plannerBody.querySelectorAll("tr").forEach(tr => {
        const cells = tr.querySelectorAll("td");
        const row = [];
        cells.forEach((cell, index) => {
          if (index < 8) row.push(cell.textContent);
        });
        rows.push(row);
      });
      localStorage.setItem("weeklyPlanner", JSON.stringify(rows));
    }

    function loadPlannerFromStorage() {
      const data = JSON.parse(localStorage.getItem("weeklyPlanner") || "[]");
      data.forEach(rowData => {
        const tr = document.createElement("tr");

        rowData.forEach((cellData, i) => {
          const td = document.createElement("td");
          td.textContent = cellData;
          if (i > 0) td.contentEditable = "true";
          tr.appendChild(td);
        });

        // Delete Button
        const deleteCell = document.createElement("td");
        const delBtn = document.createElement("button");
        delBtn.textContent = "‚ùå";
        delBtn.classList.add("delete-btn");
        delBtn.onclick = () => {
          plannerBody.removeChild(tr);
          savePlannerToStorage();
        };
        deleteCell.appendChild(delBtn);
        tr.appendChild(deleteCell);

        // Save changes on edit
        tr.querySelectorAll("td[contenteditable='true']").forEach(cell => {
          cell.addEventListener("input", savePlannerToStorage);
        });

        plannerBody.appendChild(tr);
      });
    }

    addRowBtn.addEventListener("click", () => {
      const timeInput = document.getElementById("timeInput");
      const time = timeInput.value.trim();

      if (time === "") {
        alert("Please enter a time slot!");
        return;
      }

      const tr = document.createElement("tr");

      // Time Cell
      const timeCell = document.createElement("td");
      timeCell.textContent = time;
      tr.appendChild(timeCell);

      // Editable cells for days
      for (let i = 0; i < 7; i++) {
        const cell = document.createElement("td");
        cell.contentEditable = "true";
        cell.addEventListener("input", savePlannerToStorage);
        tr.appendChild(cell);
      }

      // Delete Button
      const deleteCell = document.createElement("td");
      const delBtn = document.createElement("button");
      delBtn.textContent = "‚ùå";
      delBtn.classList.add("delete-btn");
      delBtn.onclick = () => {
        plannerBody.removeChild(tr);
        savePlannerToStorage();
      };
      deleteCell.appendChild(delBtn);
      tr.appendChild(deleteCell);

      plannerBody.appendChild(tr);
      savePlannerToStorage();
      timeInput.value = "";
    });

    // Load planner from storage when page loads
    window.addEventListener("load", loadPlannerFromStorage);
  </script>
</body>
</html>